-- Roblox Lua Script for a Universal Menu GUI
-- Supports PC and Mobile
-- Author: vhuy

-- Services
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()
local playerGui = player:WaitForChild("PlayerGui")

-- Remove dropped guns and fake knives
game:GetService("Workspace"):FindFirstChild("GunDrop"):Destroy()
for _, obj in pairs(workspace:GetDescendants()) do
	if obj:IsA("Tool") and (obj.Name == "FakeKnife" or obj.Name == "GunDrop") then
		obj:Destroy()
	end
end

-- Menu GUI
local menuGui = Instance.new("ScreenGui")
menuGui.Name = "MenuGui"
menuGui.ResetOnSpawn = false
menuGui.Parent = playerGui
menuGui.Enabled = false

-- Toggle Button
local toggleButton = Instance.new("ImageButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 50, 0, 50)
toggleButton.Position = UDim2.new(0, 20, 0.5, -25)
toggleButton.BackgroundTransparency = 1
toggleButton.Image = "rbxassetid://6031091005" -- example icon

toggleButton.Parent = menuGui

-- Draggable Toggle
local function makeDraggable(gui)
	local dragging, offset
	gui.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			offset = input.Position - gui.AbsolutePosition
		end
	end)
	gui.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = false
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
			gui.Position = UDim2.new(0, input.Position.X - offset.X, 0, input.Position.Y - offset.Y)
		end
	end)
end
makeDraggable(toggleButton)

-- Menu Frame
local frame = Instance.new("Frame")
frame.Name = "MainMenu"
frame.Size = UDim2.new(0, 250, 0, 300)
frame.Position = UDim2.new(0.5, -125, 0.5, -150)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
frame.BorderSizePixel = 0
frame.BackgroundTransparency = 0.1
frame.Visible = false
frame.Parent = menuGui

makeDraggable(frame)

-- UI Corner
local function roundify(obj, radius)
	local uiCorner = Instance.new("UICorner")
	uiCorner.CornerRadius = UDim.new(0, radius)
	uiCorner.Parent = obj
end
roundify(toggleButton, 25)
roundify(frame, 20)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Script Made by vhuy"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.Parent = frame

-- Function to create toggle buttons
local function createButton(name, yOffset, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.8, 0, 0, 30)
	btn.Position = UDim2.new(0.1, 0, 0, yOffset)
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Text = name
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 16
	roundify(btn, 10)
	btn.Parent = frame
	btn.MouseButton1Click:Connect(callback)
	return btn
end

-- Features
local espEnabled = false
createButton("Toggle ESP", 50, function()
	espEnabled = not espEnabled
	print("ESP:", espEnabled)
	-- Add your ESP logic here
end)

local autoshootButtonVisible = false
local autoshootBtn

createButton("Create AutoShoot Button", 90, function()
	if not autoshootButtonVisible then
		autoshootBtn = Instance.new("TextButton")
		autoshootBtn.Size = UDim2.new(0, 60, 0, 60)
		autoshootBtn.Position = UDim2.new(0.5, -30, 0.8, 0)
		autoshootBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
		autoshootBtn.Text = "ðŸ”«"
		autoshootBtn.Font = Enum.Font.SourceSansBold
		autoshootBtn.TextSize = 24
		autoshootBtn.TextColor3 = Color3.new(1, 1, 1)
		roundify(autoshootBtn, 30)
		makeDraggable(autoshootBtn)
		autoshootBtn.Parent = menuGui

		autoshootBtn.MouseButton1Click:Connect(function()
			local tool = player.Character and player.Character:FindFirstChildOfClass("Tool")
			if not tool or not (tool.Name == "Gun" or tool.Name == "gun") then
				StarterGui:SetCore("SendNotification", {
					Title = "AutoShoot",
					Text = "KhÃ´ng cÃ³ sÃºng!",
					Duration = 2
				})
				return
			end
			print("AutoShoot activated")
			-- Add autoshoot logic here
		end)
		autoshootButtonVisible = true
	end
end)

createButton("Reduce Lag", 130, function()
	for _, obj in pairs(workspace:GetDescendants()) do
		if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Fire") then
			obj.Enabled = false
		end
	end
	print("Lag reduced")
end)

-- Toggle menu
local function toggleMenu()
	frame.Visible = not frame.Visible
end

toggleButton.MouseButton1Click:Connect(toggleMenu)

UserInputService.InputBegan:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.LeftControl or input.KeyCode == Enum.KeyCode.RightControl then
		toggleMenu()
	end
end)

-- Fade in/out
menuGui:GetPropertyChangedSignal("Enabled"):Connect(function()
	if menuGui.Enabled then
		frame.Visible = true
	else
		frame.Visible = false
	end
end)

-- Initialize
menuGui.Enabled = true
